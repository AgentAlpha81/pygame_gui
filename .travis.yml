language: python
python:
  - 3.5
  - 3.6
  - 3.7
  - 3.8

os:
  - linux
  - windows

env:
  jobs:
    - PYGAME_VERSION=1.9.6
    - PYGAME_VERSION=2.0.0.dev6
  global:
    - SDL_VIDEODRIVER=dummy
    - SDL_AUDIODRIVER=disk

# No Travis version of 1.9.6 on Python 3.8 yet
jobs:
  include:
    - os: osx
      osx_image: xcode7.3
    - python: 3.7
    - env: PYGAME_VERSION=2.0.0.dev6
  exclude:
  - python: 3.8
    os: linux
    env: PYGAME_VERSION=1.9.6

install:
  - pip install pytest
  - pip install pytest-cov
  - pip install codecov
  - pip install -q pygame==$PYGAME_VERSION
  - python setup.py -q install

script: pytest --cov-report=xml --cov=pygame_gui tests/

after_success:
    - codecov